<div class="row">
	<div class="span3">
		&nbsp;
	</div>
	<div class="span5">
		<%= render 'search' %>
	</div>
	<div class="span3">
		&nbsp;
	</div>
</div>
<div class="row">
	<div class="span3">
		&nbsp;
	</div>
	<div class="span5">
		<% unless params[:q].nil? %>
			<% unless @search.nil? %>
			<p class="announce">Total results: <%= @search.total %></p>
			<% end %>
			<div class="results" style="font-size: 18px">
				<% @search.each_hit_with_result do |hit,l| %>
				<% logger.debug { l.inspect }%>
				<p>
					<% if l.is_a?(Line) %>
						<%= l.line %>
						<span class="ref">||<%= Stanza.find(l.stanza_id).section_id %>.<%= l.stanza_id %>||</span>
					<% else %>
						<% if l.is_a?(Book) %>
						(Book <%= l.no %>) <%= l.name %>
						<% else %>
							<% if l.is_a?(Stanza) %>
							<% count = 0 %>
							<p class="result">
								<% l.lines.each_with_index do |line, index| %>
									<% (count += 1) %>
									<%= line.line %>
									<% if count < l.length.to_i %>
										<br>
									<% end %>
								<% end %>
								<span class="ref">||<%= l.section %>.<%= l.no %> ||</span>
							</p>
							<% end %>
						<% end %>
					<% end %>
				</p>
				<% end %>
				<%= paginate @search.results, :param_name => :page %>
				</div>
		<% end %>	
		</div>
		<div class="span3">
			<% unless params[:q].nil? %>
			<%= render 'facet' %>
			<% end %>
		</div>
	</div>
